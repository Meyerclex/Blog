(()=>{document.addEventListener("DOMContentLoaded",()=>{console.log("JavaScript loaded and DOMContentLoaded event fired.");const n=document.querySelector("#post-content");if(!n){console.error("Error: #post-content not found!");return}function o(e){if(e.classList.contains("emoji"))return;e.hasAttribute("width")||e.setAttribute("width",e.naturalWidth),e.hasAttribute("height")||e.setAttribute("height",e.naturalHeight)}const i=n=>{if(n.classList.contains("emoji"))return;n.src.includes("/img/emoji/")||(n.style.cursor="zoom-in",n.addEventListener("click",()=>{e.removeAttribute("src"),e.removeAttribute("width"),e.removeAttribute("height"),e.src=n.src,e.setAttribute("width",n.width),e.setAttribute("height",n.height),e.style.width="auto",e.style.height="auto",t.classList.add("active")})),n.complete?o(n):n.addEventListener("load",()=>o(n))},t=document.createElement("div");t.className="image-overlay",document.body.appendChild(t);const e=document.createElement("img");t.appendChild(e),t.addEventListener("click",()=>{t.classList.remove("active")});const s=Array.from(n.querySelectorAll("img"));if(s.length===0){console.log("No images found.");return}console.log(`Found ${s.length} images.`),s.forEach(i);const a=n.querySelectorAll("p");a.forEach(e=>{const t=e.querySelector("img");t&&t.id!=="emoji"&&!t.classList.contains("emoji")&&(e.style.textAlign="center",e.style.fontSize="90%")});const r=n.querySelectorAll("img");r.forEach(e=>{if(e.classList.contains("emoji"))return;if(e.closest("p"))return;if(e.id==="emoji")return;if(!e.alt)return;const t=e.nextSibling;if(t&&t.nodeType===Node.TEXT_NODE&&t.textContent.trim()){const n=document.createElement("span");n.textContent=t.textContent.trim(),n.style.display="block",n.style.textAlign="center",n.style.fontSize="90%",e.parentNode.replaceChild(n,t)}})})})()