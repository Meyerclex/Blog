{{ define "main" }}
{{ $aboutNav := resources.Get "css/_about-nav.scss" | toCSS }}
<link rel="stylesheet" href="{{ $aboutNav.RelPermalink }}">

<header>
    <div class="header-container">
        <div class="header-inner">
            <div class="header-left">
            <img draggable="false" style="max-width: 30%;padding: 0 0.5rem 0 0;" class="header-img-pc-only" alt="ğŸƒ" src="/my-emojis/svg/1f343.svg">
                {{ partial "nav_index" . }}
            </div>
            <div class="header-content">
                <h2 data-pagefind-meta="title">{{ .Title }}</h2>
                {{ if .Params.toc | default true }}
                <style>
                    #toc-hr {
                        display: none;
                    }
                    .post-toc-mobile {
                        display: none;
                    }
                </style>
                {{ partial "toc.html" . }}
                {{ end }}
                <article>
                    <div id="post-content" data-pagefind-body>
                        {{/* å®šä¹‰æ›¿æ¢æ¨¡å¼å’ŒåŒ…è£¹å®¹å™¨ */}}
                        {{ $emojiPattern := `:([A-Za-z0-9_-]+):` }}
                        {{ $tableWrapper := printf "<div class=\"table-wrapper\">${1}</div>" }}
                        
                        {{/* å¯¹å†…å®¹è¿›è¡Œæ›¿æ¢å’ŒåŒ…è£¹ */}}
                        {{ .Content     
                            | replaceRE $emojiPattern `<img class="emojis" src="/img/emoji/$1.png" alt=":$1:" loading="lazy">`     
                            | replaceRE "(<table>(?:.|\n)+?</table>)" $tableWrapper     
                            | safeHTML 
                        }}
                    </div>
                </article>
                <br>
                <p class="last-edit-time" style="text-align: right; color: var(--secondary-text-color);">

                    {{ if .Params.tags }}
                    {{ range .Params.tags }}
                    <a href="{{ "/tags/" | relURL }}{{ . | urlize }}">ï¼ƒ{{ . }}</a>
                    {{ end }}
                    {{ end }}


                    {{ with .Params.last_edit }}
                    last edited:
                    {{ . }}
                    {{ end }}
                </p>
                <nav class="custom-paginav">
                    {{ with .PrevInSection }}
                    <a class="custom-paginav-prev" href="{{ .RelPermalink }}">
                        <span class="custom-paginav-title">Â« Prev</span><br>
                        <span>{{ .Title }}</span>
                    </a>
                    {{ end }}
                    {{ with .NextInSection }}
                    <a class="custom-paginav-next" href="{{ .RelPermalink }}">
                        <span class="custom-paginav-title">Next Â»</span><br>
                        <span>{{ .Title }}</span>
                    </a>
                    {{ end }}
                </nav>
                <br>
                {{ if .Params.comment | default true }}
                <script src="https://unpkg.com/@waline/client@v2/dist/waline.js"></script>
                <link rel="stylesheet" href="https://unpkg.com/@waline/client@v2/dist/waline.css" />
<!--                <img src="/site/ghostszombies.gif" class="divider" style="display: block; margin-left: auto; margin-right: auto;" data-pagefind-ignore />-->
                <div id="comments" class="comments" data-pagefind-ignore>
                    {{ partial "comment.html" . }}
                </div>
                {{ end }}
            </div>
        </div>
    </div>
</header>


<hr class="decoration-hr">
{{ partial "footer.html" . }}
{{ end }}
