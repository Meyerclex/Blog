{{ define "main" }}
{{- $style := resources.Get "css/_wide.scss" | toCSS (dict "outputStyle" "compressed") -}}
{{- $style_linked := $style.RelPermalink -}}
<style>
    :root {
        /* 保留默认高度变量，作为备用 */
        --title-bg-height: 120px; 
    }
</style>
<link rel="stylesheet" href="{{ $style_linked }}">
                {{ if .Params.toc | default true }}
                <style>
                    #toc-hr {
                        display: none;
                    }
                    .post-toc-mobile {
                        display: none;
                    }
                </style>
                {{ partial "toc.html" . }}
                {{ end }}
<div class="archive">
    <nav class="single-nav">
        <a href="/">Home</a> | 
        <a href="/about/">About</a> |
        <a href="/links/">Friends</a>  |
        <a href="/fanpage/">Fanpage</a>  
    </nav>
    
    {{ $bgImage := .Params.header_image }}
    {{ if not $bgImage }}
        {{ $bgImage = "var(--title-bg-image)" }}
    {{ else }}
        {{ $bgImage = $bgImage | relURL }}
    {{ end }}

    {{ $bgHeight := default "var(--title-bg-height)" .Params.header_height }}
    
    <div class="title-img" style="background-image: url('{{ $bgImage }}'); height: {{ $bgHeight }}; 
    display: flex; align-items: center;
    background-size: 100% auto;    
      background-position: center;"
    >
        <h2 class="post-title" style="margin: 0; padding-left: 20px;">{{ .Title }}</h2>
        </div>

    <div class="table-content">
        <span style="color: peru; user-select: none; text-shadow: 0px 0px 4px #ffffff6e;"><center>◆ ◆ ◆</center></span>
        {{ .Content }}
    </div>
    
                <p class="last-edit-time" style="text-align: right; color: var(--secondary-text-color);">

                    {{ if .Params.tags }}
                    {{ range .Params.tags }}
                    <a href="{{ "/tags/" | relURL }}{{ . | urlize }}">＃{{ . }}</a>
                    {{ end }}
                    {{ end }}


                    {{ with .Params.last_edit }}
                    last edited:
                    {{ . }}
                    {{ end }}
                </p>
                <!-- <nav class="custom-paginav" style="margin: 0 15px;">
                    {{ with .PrevInSection }}
                    <a class="custom-paginav-prev" href="{{ .RelPermalink }}">
                        <span class="custom-paginav-title">« Prev</span><br>
                        <span>{{ .Title }}</span>
                    </a>
                    {{ end }}
                    {{ with .NextInSection }}
                    <a class="custom-paginav-next" href="{{ .RelPermalink }}">
                        <span class="custom-paginav-title">Next »</span><br>
                        <span>{{ .Title }}</span>
                    </a>
                    {{ end }}
                </nav> -->
                <br>
                {{ if .Params.comment | default true }}
                <script src="https://unpkg.com/@waline/client@v2/dist/waline.js"></script>
                <link rel="stylesheet" href="https://unpkg.com/@waline/client@v2/dist/waline.css" />
<!--                <img src="/site/ghostszombies.gif" class="divider" style="display: block; margin-left: auto; margin-right: auto;" data-pagefind-ignore />-->
                <div style="margin: 0 15px;" id="comments" class="comments" data-pagefind-ignore>
                    {{ partial "comment.html" . }}
                </div>
                {{ end }}
</div>

<hr class="decoration-hr">
{{- partial "footer.html" . -}}
{{ end }}