{{ define "main" }}
<h1>{{ .Title }}</h1>

{{ .Content }}
    <style>
        body[a="dark"] #copyright  {
            background-image:
                    linear-gradient(rgba(39, 15, 64, 0.7),
                    rgba(28, 10, 58, 0.91)),
            url('/site/tumblr_1d04ca11032168b7f51f4f1f1c1a936b_43682731_250.png')!important;
        }
    </style>
    <body>
    <div class="main-container">
        <div id="page_posts" class="window active page_posts" style="">
        <div class="window-title" style="">
            <div class="buttons">
                <div class="button" style="background: #ffff4d;" onclick="history.back()"></div>
                <div class="button" style="background: #ff6b6b;" onclick="history.back()"></div>
            </div></div>
        <div class="window-content">
            <div class="postslist">
                {{/* begin of archive heading */}}
                <div class="post-head-wrapper-text-only">
                    {{- $type := .Type -}}
                    {{/* **** Category-wide stats **** */}}
                    {{- $scratch := newScratch -}}
                    {{- $articles_cat := (where .Site.RegularPages "Type" $type) -}}
                    {{- $articles_cat_count := len $articles_cat -}}
                    {{- range (where .Site.RegularPages "Type" $type) -}}
                        {{- $scratch.Add "allwordcount" .WordCount -}}
                    {{- end -}}
                    {{/* end of archive heading */}}
                </div>
                <div class="content">
                    <div class="">
                        <div class="">
                            {{/* **** Yearly archive **** */}}
                            {{/* Group articles by year and loop through them */}}
                            {{- $currentYear := now.Format "2006" | int -}}  <!-- è½¬æ¢ä¸ºæ•´æ•° -->
                            {{- range (.Site.RegularPages.GroupByDate "2006") -}}
                                {{- $articles_yearly := (where (where .Pages "Type" $type) "Params.hidden" "!=" true) -}}
                                {{- $articles_yearly_count := len $articles_yearly -}}
                                {{- $year := .Key | int -}}  <!-- ç¡®ä¿å¹´ä»½æ˜¯æ•´æ•° -->

                                {{ if and (gt .Key 1) (gt $articles_yearly_count 0) }}
                                    <h3 class="archive--year">
                                        {{ .Key }} / {{ $articles_yearly_count }} {{ if ne $articles_cat_count 1 }}entries{{ else }}entry{{ end }}
                                    </h3>

                                    {{ if eq $year $currentYear }}
                                        <ul>
                                            {{- range $articles_yearly -}}
                                                <li>
                                                    <span class="">{{ .Date.Format "01-02" }}</span>&emsp;
                                                    <a href="{{ .RelPermalink }}">
                                                        {{ if .Draft }}{{ i18n "draft" }}{{ end }}{{ .Title }}
                                                    </a>
                                                </li>
                                            {{- end -}}
                                        </ul>
                                    {{ else }}
                                        <details style="padding: 0px; margin: 0px;">
                                            <summary style="padding: 10px;">Click Here</summary>
                                            <ul>
                                                {{- range $articles_yearly -}}
                                                    <li>
                                                        <span class="">{{ .Date.Format "01-02" }}</span>&emsp;
                                                        <a href="{{ .RelPermalink }}">
                                                            {{ if .Draft }}{{ i18n "draft" }}{{ end }}{{ .Title }}
                                                        </a>
                                                    </li>
                                                {{- end -}}
                                            </ul>
                                        </details>
                                    {{ end }}
                                {{ end }}
                            {{ end }}


                        </div>
                        <div id="index-content">
                        </div>
                    </div>
                    {{ $randomcat := resources.Get "js/randomcat.js" }}
                </div>
            </div>
        </div>
    </div>
        <div class="note menu-float" style="flex: 0 0 45%;">
            <div class="note__item">
                <div id="copyright" class="note__list"
                     style="font-size: 80%;
                     background-image:
                     linear-gradient(rgba(255, 255, 255, 0.8),
                     rgba(255, 255, 255, 0.8)),
                     url('/site/bg-mizu1-2-2.gif');
                     background-repeat: repeat;">
                    {{ with site.GetPage "copyright" }}
                    <h3 style="margin-top: 1em;">{{ .Title }}</h3>
                    {{ .Content | safeHTML }}
                    {{ else }}
                    <p>404 Not Found</p>
                    {{ end }}
                </div>
            </div>
        <div class="note__item">
            <div class="note__day">æ›´æ–°æ—¥å¿—</div>
            <div class="note__list" style="font-size: 80%;">
                <details class="mumble" style="max-height: 250px;">
                    <summary>Changelog...</summary>
                    {{ with site.GetPage "changelog" }}
                        {{ .Content | safeHTML }}
                    {{ else }}
                        <p>404 Not Found</p>
                    {{ end }}
                </details>
            </div>
        </div>
            <hr class="decoration-hr">
            <p style="text-align: center;"><a href="/search" target="_blank">ðŸ“– Search for...</a>
            </p>

    </div>
    </div>
    </body>
    {{- partial "footer.html" . -}}
{{ end }}