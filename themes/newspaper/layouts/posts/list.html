{{ define "main" }}
<div class="header-container" id="mobile-nav">
    <div class="header-inner">
        <div class="header-left">
            <img src="/cat/tumblrcat.png" alt="Icon" class="header-img">
            {{ partial "nav_index" . }}
        </div>
    </div>
</div>
<style>
    .header-content p {
        margin: 0.5em 0;
    }

    .header-container {
        display: flex;
        justify-content: center;
        padding: 0em 0em;
    }

    .header-inner {
        display: flex;
        align-items: center;  /* ä¿è¯åœ¨å°å±æ—¶å†…å®¹å‚ç›´å±…ä¸­ */
        gap: 1em; /* æ§åˆ¶å›¾ç‰‡ä¸å¯¼èˆªä¹‹é—´çš„é—´è· */
        flex-wrap: nowrap; /* ä¸å…è®¸æ¢è¡Œ */
    }

    .header-left {
        display: flex;
        flex-direction: row; /* å›¾ç‰‡ä¸ nav æ¨ªå‘æ’åˆ— */
        justify-content: center; /* å›¾ç‰‡ä¸ nav æ°´å¹³å±…ä¸­ */
        align-items: center;
        flex: 0 0 auto; /* ä¸è¦è‡ªåŠ¨æ‹‰ä¼¸ */
    }

    .header-content {
        flex: 1; /* å æ®å‰©ä½™ç©ºé—´ */
        min-width: 0; /* é˜²æ­¢æº¢å‡º */
        display: flex;
        flex-direction: column;
        gap: 0px;
    }

    .header-img {
        width: 220px;
        object-fit: cover;
        object-position: center;
        filter: drop-shadow(10px 2px 0px var(--index-shadow));
        margin: -1em -3em -1em -1em;
        transition: transform 0.2s ease;
        animation: none;
        user-select: none;
        -webkit-user-drag: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
    }
    #nav {
        position: relative;
        z-index: 10;
    }
    #nav ul li {
        padding: 0 0.5rem 0 -1.5em;
        margin: 0;
        text-transform: lowercase;
        font-family: Courier New, cursive;
    }

    #nav ul li a:hover {
        background-color: var(--mark);
    }

    /* é»˜è®¤æ˜¾ç¤º PC å¯¼èˆªï¼Œéšè—ç§»åŠ¨å¯¼èˆª */
    #pc-nav,#list-title-h1 {
        display: block;
    }
    #mobile-nav {
        display: none;
    }

    /* å°å±å¹•æ—¶ï¼šæ˜¾ç¤ºç§»åŠ¨ç‰ˆï¼Œéšè— PC ç‰ˆ */
    @media screen and (max-width: 786px) {
        .header-img {
            margin: -1em -2em -1em -1em;
        }
        .header-inner {
            flex-direction: row; /* ä¿è¯å›¾ç‰‡å’Œ nav åœ¨å°å±å¹•æ—¶æ¨ªå‘æ’åˆ— */
            gap: 1em; /* å›¾ç‰‡å’Œ nav ä¹‹é—´çš„é—´è· */
            justify-content: center; /* æ°´å¹³å±…ä¸­ */
        }

        .header-left {
            flex-direction: row; /* å›¾ç‰‡ä¸ nav æ¨ªå‘æ’åˆ— */
            justify-content: center;
            align-items: center;
        }

        .header-left img {
            width: 160px; /* å›¾ç‰‡ç¨å¾®ç¼©å° */
        }

        .header-content {
            width: 100%; /* ç¡®ä¿å†…å®¹å¡«å……å‰©ä½™ç©ºé—´ */
        }

        .header-container {
            display: flex;
            justify-content: center;
            /*padding: 0.5em;*/
        }

        #pc-nav, #list-title-h1 {
            display: none;
        }

        #mobile-nav {
            display: block;
        }
    }


</style>


<h1 id="list-title-h1">{{ .Title }}</h1>

    <body>
    <div class="main-container">
        <div id="page_posts" class="window active page_posts" style="">
        <div class="window-title" style="">
            <div class="buttons">
                <div class="button" style="background: #ffff4d;" onclick="history.back()"></div>
                <div class="button" style="background: #ff6b6b;" onclick="history.back()"></div>
            </div></div>
        <div class="window-content">
            <div class="postslist">
                {{/* begin of archive heading */}}
                <div class="post-head-wrapper-text-only">
                    {{- $type := .Type -}}
                    {{/* **** Category-wide stats **** */}}
                    {{- $scratch := newScratch -}}
                    {{- $articles_cat := (where .Site.RegularPages "Type" $type) -}}
                    {{- $articles_cat_count := len $articles_cat -}}
                    {{- range (where .Site.RegularPages "Type" $type) -}}
                        {{- $scratch.Add "allwordcount" .WordCount -}}
                    {{- end -}}
                    {{/* end of archive heading */}}
                </div>
                <div class="content">
                    <div class="">
                        <div class="">
                            {{/* **** Yearly archive **** */}}
                            {{/* Group articles by year and loop through them */}}
                            {{- $currentYear := now.Format "2006" | int -}}  <!-- è½¬æ¢ä¸ºæ•´æ•° -->
                            {{- range (.Site.RegularPages.GroupByDate "2006") -}}
                                {{- $articles_yearly := (where (where .Pages "Type" $type) "Params.hidden" "!=" true) -}}
                                {{- $articles_yearly_count := len $articles_yearly -}}
                                {{- $year := .Key | int -}}  <!-- ç¡®ä¿å¹´ä»½æ˜¯æ•´æ•° -->

                                {{ if and (gt .Key 1) (gt $articles_yearly_count 0) }}
                                    <h3 class="archive--year">
                                        {{ .Key }} / {{ $articles_yearly_count }} {{ if ne $articles_cat_count 1 }}entries{{ else }}entry{{ end }}
                                    </h3>

                                    {{ if eq $year $currentYear }}
                                        <ul>
                                            {{- range $articles_yearly -}}
                                                <li>
                                                    <span class="">{{ .Date.Format "01-02" }}</span>&emsp;
                                                    <a href="{{ .RelPermalink }}">
                                                        {{ if .Draft }}{{ i18n "draft" }}{{ end }}{{ .Title }}
                                                    </a>
                                                </li>
                                            {{- end -}}
                                        </ul>
                                    {{ else }}
                                        <details style="padding: 0px; margin: 0px;">
                                            <summary style="padding: 10px;">Click Here</summary>
                                            <ul>
                                                {{- range $articles_yearly -}}
                                                    <li>
                                                        <span class="">{{ .Date.Format "01-02" }}</span>&emsp;
                                                        <a href="{{ .RelPermalink }}">
                                                            {{ if .Draft }}{{ i18n "draft" }}{{ end }}{{ .Title }}
                                                        </a>
                                                    </li>
                                                {{- end -}}
                                            </ul>
                                        </details>
                                    {{ end }}
                                {{ end }}
                            {{ end }}


                        </div>
                        <div id="index-content">
                        </div>
                    </div>
                    {{ $randomcat := resources.Get "js/randomcat.js" }}
                </div>
            </div>
        </div>
    </div>
        <div class="note menu-float" style="flex: 0 0 45%;">
            <div class="header-container" id="pc-nav">
                <div class="header-inner">
                    <div class="header-left">
                        <img src="/cat/tumblrcat.png" alt="Icon" class="header-img">
                        {{ partial "nav_index" . }}
                    </div>
                </div>
            </div>
            <div class="note__item">
                <div id="copyright" class="note__list"
                     >
                    {{ with site.GetPage "copyright" }}
                    <h3 style="margin-top: 1em;">{{ .Title }}</h3>
                    {{ .Content | safeHTML }}
                    {{ else }}
                    <p>404 Not Found</p>
                    {{ end }}
                </div>
            </div>
        <div class="note__item">
            <div class="note__day">æ›´æ–°æ—¥å¿—</div>
            <div class="note__list" style="font-size: 80%;">
                <details class="mumble" style="max-height: 250px;">
                    <summary>Changelog...</summary>
                    {{ with site.GetPage "changelog" }}
                        {{ .Content | safeHTML }}
                    {{ else }}
                        <p>404 Not Found</p>
                    {{ end }}
                </details>
            </div>
        </div>
            <hr class="decoration-hr">
            <p style="text-align: center;"><a href="/search" target="_blank">ğŸ“– Search for...</a>
            </p>

    </div>
    </div>
    </body>
    {{- partial "footer.html" . -}}
{{ end }}