<div id="theme-toggle" class="theme-toggle">
  <div id="light-btn"></div>
  <div id="dark-btn"></div>
</div>

<script>
  // 获取按钮元素
  const themeToggle = document.getElementById('theme-toggle');

  // 初始化主题
  let currentTheme = localStorage.getItem('theme') || 'auto';
  if (currentTheme === 'auto') {
    const prefersDarkScheme = window.matchMedia("(prefers-color-scheme: dark)").matches;
    currentTheme = prefersDarkScheme ? 'dark' : 'light';
  }
  document.body.setAttribute('a', currentTheme);
  document.body.classList.add(currentTheme + '-mode');

  // 切换主题的函数
  const toggleTheme = () => {
    if (currentTheme === 'light') {
      document.body.classList.remove('light-mode');
      document.body.classList.add('dark-mode');
      currentTheme = 'dark';
    } else if (currentTheme === 'dark') {
      document.body.classList.remove('dark-mode');
      document.body.classList.add('light-mode');
      currentTheme = 'light';
    }
    localStorage.setItem('theme', currentTheme);
    document.body.setAttribute('a', currentTheme);
  };

  themeToggle.addEventListener('click', toggleTheme);

  // 滚动事件监听器，动态调整按钮透明度
  window.addEventListener('scroll', () => {
    const scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
    const docHeight = document.documentElement.scrollHeight || document.body.scrollHeight;
    const winHeight = window.innerHeight || document.documentElement.clientHeight;

    // 计算页面滚动的百分比
    const scrollPercent = (scrollTop / (docHeight - winHeight)) * 100;

    // 根据滚动百分比调整按钮透明度
    if (scrollPercent >= 10 && scrollPercent <= 40) {
      themeToggle.style.opacity = (1 - (scrollPercent - 10) / 30).toFixed(2); // 从 1 到 0 逐渐变化
    } else if (scrollPercent > 40) {
      themeToggle.style.opacity = 0; // 完全隐藏
    } else {
      themeToggle.style.opacity = 1; // 初始显示
    }
  });
</script>


<div id="header-post">
  <span id="nav">
    <ul>
      {{ range .Site.Menus.main }}
        <li><a href="{{ .URL }}">{{ .Name }}</a></li>
      {{ end }}
    </ul>
  </span>
</div>


