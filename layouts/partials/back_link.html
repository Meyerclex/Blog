<!--<a id="back-link" href="{{ "" | relURL }}">{{ $.Site.Params.theme_config.back_home_text }}</a>-->
<!--<script>-->
<!--    window.addEventListener("load", function() {-->
<!--        const backLink = document.getElementById("back-link");-->

<!--        // 获取上一页的 URL-->
<!--        const referrer = document.referrer;-->

<!--        // 获取当前页面的 URL-->
<!--        const currentURL = window.location.pathname;-->

<!--        // 判断当前页面是否是 All posts 页面 (/posts 或 /posts/)-->
<!--        if (currentURL === "/posts" || currentURL === "/posts/") {-->
<!--            backLink.href = "/";  // 如果是 All posts 页面，返回首页-->
<!--            backLink.textContent = "Back to Home";  // 根据需要修改显示的文字-->
<!--        }-->
<!--        // 判断上一页是否为 /posts 或首页-->
<!--        else if (referrer.includes("/posts")) {-->
<!--            backLink.href = "/posts";  // 返回到 All posts 页面-->
<!--            backLink.textContent = "Back to All Posts";  // 根据需要修改显示的文字-->
<!--        } else if (referrer === window.location.origin || referrer === "") {-->
<!--            backLink.href = "/";  // 返回到首页-->
<!--            backLink.textContent = "Back to Home";  // 根据需要修改显示的文字-->
<!--        } else {-->
<!--            backLink.href = referrer;  // 如果无法判断，回到上一页-->
<!--            backLink.textContent = "Back";  // 你可以根据需要修改-->
<!--        }-->
<!--    });-->
<!--</script>-->
<div id="theme-toggle" class="theme-toggle">
  <div id="light-btn"></div>
  <div id="dark-btn"></div>
</div>

<script>
  // 获取按钮元素
  const themeToggle = document.getElementById('theme-toggle');

  // 初始化主题
  let currentTheme = localStorage.getItem('theme') || 'auto';
  if (currentTheme === 'auto') {
    const prefersDarkScheme = window.matchMedia("(prefers-color-scheme: dark)").matches;
    currentTheme = prefersDarkScheme ? 'dark' : 'light';
  }
  document.body.setAttribute('a', currentTheme);
  document.body.classList.add(currentTheme + '-mode');

  // 切换主题的函数
  const toggleTheme = () => {
    if (currentTheme === 'light') {
      document.body.classList.remove('light-mode');
      document.body.classList.add('dark-mode');
      currentTheme = 'dark';
    } else if (currentTheme === 'dark') {
      document.body.classList.remove('dark-mode');
      document.body.classList.add('light-mode');
      currentTheme = 'light';
    }
    localStorage.setItem('theme', currentTheme);
    document.body.setAttribute('a', currentTheme);
  };

  themeToggle.addEventListener('click', toggleTheme);

  // 滚动事件监听器，动态调整按钮透明度
  window.addEventListener('scroll', () => {
    const scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
    const docHeight = document.documentElement.scrollHeight || document.body.scrollHeight;
    const winHeight = window.innerHeight || document.documentElement.clientHeight;

    // 计算页面滚动的百分比
    const scrollPercent = (scrollTop / (docHeight - winHeight)) * 100;

    // 根据滚动百分比调整按钮透明度
    if (scrollPercent >= 10 && scrollPercent <= 40) {
      themeToggle.style.opacity = (1 - (scrollPercent - 10) / 30).toFixed(2); // 从 1 到 0 逐渐变化
    } else if (scrollPercent > 40) {
      themeToggle.style.opacity = 0; // 完全隐藏
    } else {
      themeToggle.style.opacity = 1; // 初始显示
    }
  });
</script>


<div id="header-post">
  <span id="nav">
    <ul>
      {{ range .Site.Menus.main }}
        <li><a href="{{ .URL }}">{{ .Name }}</a></li>
      {{ end }}
    </ul>
  </span>
</div>


