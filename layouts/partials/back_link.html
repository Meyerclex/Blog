<!--<a id="back-link" href="{{ "" | relURL }}">{{ $.Site.Params.theme_config.back_home_text }}</a>-->
<!--<script>-->
<!--    window.addEventListener("load", function() {-->
<!--        const backLink = document.getElementById("back-link");-->

<!--        // 获取上一页的 URL-->
<!--        const referrer = document.referrer;-->

<!--        // 获取当前页面的 URL-->
<!--        const currentURL = window.location.pathname;-->

<!--        // 判断当前页面是否是 All posts 页面 (/posts 或 /posts/)-->
<!--        if (currentURL === "/posts" || currentURL === "/posts/") {-->
<!--            backLink.href = "/";  // 如果是 All posts 页面，返回首页-->
<!--            backLink.textContent = "Back to Home";  // 根据需要修改显示的文字-->
<!--        }-->
<!--        // 判断上一页是否为 /posts 或首页-->
<!--        else if (referrer.includes("/posts")) {-->
<!--            backLink.href = "/posts";  // 返回到 All posts 页面-->
<!--            backLink.textContent = "Back to All Posts";  // 根据需要修改显示的文字-->
<!--        } else if (referrer === window.location.origin || referrer === "") {-->
<!--            backLink.href = "/";  // 返回到首页-->
<!--            backLink.textContent = "Back to Home";  // 根据需要修改显示的文字-->
<!--        } else {-->
<!--            backLink.href = referrer;  // 如果无法判断，回到上一页-->
<!--            backLink.textContent = "Back";  // 你可以根据需要修改-->
<!--        }-->
<!--    });-->
<!--</script>-->
<div id="theme-toggle" class="theme-toggle">
  <div id="light-btn"></div>
  <div id="dark-btn"></div>
</div>
<script>
  // 初始化主题，首先检查 localStorage 是否有保存的主题设置
  let currentTheme = localStorage.getItem('theme') || 'auto';

  // 如果没有保存的主题，则根据系统偏好设置主题
  if (currentTheme === 'auto') {
    const prefersDarkScheme = window.matchMedia("(prefers-color-scheme: dark)").matches;
    currentTheme = prefersDarkScheme ? 'dark' : 'light';
  }

  // 应用当前主题
  document.body.setAttribute('a', currentTheme);
  document.body.classList.add(currentTheme + '-mode');

  // 获取按钮元素
  const themeToggle = document.getElementById('theme-toggle');

  // 切换主题的函数
  const toggleTheme = () => {
    // 只处理 light 和 dark 模式
    if (currentTheme === 'light') {
      document.body.classList.remove('light-mode');
      document.body.classList.add('dark-mode');
      currentTheme = 'dark';
    } else if (currentTheme === 'dark') {
      document.body.classList.remove('dark-mode');
      document.body.classList.add('light-mode');
      currentTheme = 'light';
    }

    // 保存选择的主题到 localStorage
    localStorage.setItem('theme', currentTheme);
    document.body.setAttribute('a', currentTheme);
  };

  // 绑定点击事件来切换主题
  themeToggle.addEventListener('click', toggleTheme);
</script>

<div id="header-post">
  <span id="nav">
    <ul>
      {{ range .Site.Menus.main }}
        <li><a href="{{ .URL }}">{{ .Name }}</a></li>
      {{ end }}
    </ul>
  </span>
</div>


