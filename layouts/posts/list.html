{{ define "main" }}
<h1>{{ .Title }}<img style="width: 13%; margin: 0 0;" src="https://pub-219f59729cc7474d97beb0f99a13e6bd.r2.dev/picture/2024/12/8fd02c72ea9ae1442c54e990ae50d595.gif"></h1>

{{ .Content }}

    <body>
    <div class="main-container">
    <div id="page_posts" class="window active page_posts" style="">
        <div class="window-title" style="">
            <div class="buttons">
                <div class="button" style="background: #ffff4d;" onclick="history.back()"></div>
                <div class="button" style="background: #ff6b6b;" onclick="history.back()"></div>
            </div></div>
        <div class="window-content">
            <div class="postslist">
                {{/* begin of archive heading */}}
                <div class="post-head-wrapper-text-only">
                    {{- $type := .Type -}}
                    {{/* **** Category-wide stats **** */}}
                    {{- $scratch := newScratch -}}
                    {{- $articles_cat := (where .Site.RegularPages "Type" $type) -}}
                    {{- $articles_cat_count := len $articles_cat -}}
                    {{- range (where .Site.RegularPages "Type" $type) -}}
                        {{- $scratch.Add "allwordcount" .WordCount -}}
                    {{- end -}}
                    {{/* end of archive heading */}}
                </div>
                <div class="content">
                    <div class="">
                        <div class="">
                            {{/* **** Yearly archive **** */}}
                            {{/* Group articles by year and loop through them */}}
                            {{- range (.Site.RegularPages.GroupByDate "2006") -}}
                                {{/* Get articles to display, excluding hidden ones */}}
                                {{- $articles_yearly := (where (where .Pages "Type" $type) "Params.hidden" "!=" true) -}}
                                {{/* Count articles returned */}}
                                {{- $articles_yearly_count := len $articles_yearly -}}
                                {{/* Check if a proper year is returned and if it contains any articles */}}
                                {{ if and (gt .Key 1) (gt $articles_yearly_count 0) }}
                                    {{- range $index, $value := $articles_yearly -}}
                                        {{ if not $index }}
                                            {{/* Display a header in the first loop */}}
                                            <h3 class="archive--year">{{ .Date.Format "2006" }}
                                                / {{ $articles_yearly_count }} {{ if ne $articles_cat_count 1 }}entries{{ else }}entry{{ end }}</h3>
                                            <ul>
                                        {{ end }}
                                        {{/* Display articles here */}}
                                        <li>
                                            <span class="">{{ .Date.Format "01-02" }}</span>&emsp;
                                            <a href="{{ .RelPermalink }}">
                                                {{ if .Draft }}{{ i18n "draft" }}{{ end }}{{ .Title }}
                                            </a>
                                        </li>
                                    {{ end }}
                                    </ul>
                                {{ end }}
                            {{ end }}

                        </div>
                        <div id="index-content">
                        </div>
                    </div>
                    {{ $randomcat := resources.Get "js/randomcat.js" }}
                </div>
            </div>
        </div>


    </div>

    <div class="note menu-float" style="flex: 0 0 45%;">
                <div class="note__item">
                    <div class="note__day">ç¢ç¢å¿µå•¦ï¼Œå””ä½¿ç†æˆ‘</div>
                    <div class="note__list" style="font-size: 80%;">
                        <details class="mumble">
                            <summary>Mumble...</summary>
                            <div id="feed-reader" ></div>
                            <script>
                                const feedURL = 'https://status.cafe/users/lyin.atom';

                                function timeAgo(publishedDate) {
                                    const now = new Date();
                                    const published = new Date(publishedDate);
                                    const diff = now - published; // å·®å€¼ä»¥æ¯«ç§’ä¸ºå•ä½

                                    const seconds = Math.floor(diff / 1000);
                                    const minutes = Math.floor(seconds / 60);
                                    const hours = Math.floor(minutes / 60);
                                    const days = Math.floor(hours / 24);

                                    if (days > 0) {
                                        return `${days} day${days > 1 ? 's' : ''} ago`;
                                    } else if (hours > 0) {
                                        return `${hours} hour${hours > 1 ? 's' : ''} ago`;
                                    } else if (minutes > 0) {
                                        return `${minutes} minute${minutes > 1 ? 's' : ''} ago`;
                                    } else {
                                        return `${seconds} second${seconds > 1 ? 's' : ''} ago`;
                                    }
                                }

                                fetch(feedURL)
                                    .then(response => response.text())
                                    .then(str => new window.DOMParser().parseFromString(str, "text/xml"))
                                    .then(data => {
                                        const entries = data.querySelectorAll("entry");
                                        let html = ``;
                                        entries.forEach(el => {
                                            let title = el.querySelector("title").innerHTML.slice(0, 7).trim();
                                            let content = el.querySelector("content").textContent.trim();
                                            let publishedDate = el.querySelector("published").innerHTML;
                                            let relativeTime = timeAgo(publishedDate);

                                            html += `
              <div class="statuscafe-entry">
                <p class="statuscafe-username">${title} - ${relativeTime}</p>
                <p class="statuscafe-content">${content}</p>
              </div>
            `;
                                        });
                                        document.getElementById("feed-reader").innerHTML = html;
                                    });
                            </script>
                        </details>
                    </div>
                </div>
        <blockquote style="font-size: 90%;">
            è¿™ä¹ˆé•¿çš„ç½‘é¡µçœ‹èµ·æ¥å¾ˆéº»çƒ¦å§ï¼Ÿ<br>æ‰€ä»¥é™„èµ ä¸€å¼ å®å®å¯çˆ±å°å¡ï¼Œè§è€…æœ‰ä»½ğŸ¥°<br>è¯·æŸ¥æ”¶ï¼
        </blockquote>
            <div class="main-container">
                <div style="height: 100%; display: flex; justify-content: center; align-items: center;">
                    <div style="height: 50%; max-width: 80%; align-items: center;">
                        <div class="polaroid-frame">
                            <div class="polaroid-image">
                                <img src="https://pub-219f59729cc7474d97beb0f99a13e6bd.r2.dev/picture/2024/12/e5b786e27835fd295754ce15d32f9654.jpg">
                            </div>
                            <div class="polaroid-caption">
                              ğŸ¤ å®å®æˆ‘ä»¬å–œæ¬¢ä½ ï¼
                            </div>
                        </div>
                    </div>
                </div>
                            </div>


    </div>
    </div>
    </body>
    {{- partial "footer.html" . -}}
{{ end }}